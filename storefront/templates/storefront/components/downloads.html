<style>
    :root {
        --file-bg: var(--nexus-card-bg, #181b21);
        --file-border: var(--nexus-border, rgba(255, 255, 255, 0.08));
        --nexus-accent: var(--nexus-accent, #f97316);
    }

    .nexus-file-section {
        padding: 30px 0; /* Reduced from 40px */
        width: 100%;
    }

    .nexus-section-header {
        margin-bottom: 25px; /* Reduced from 40px */
        text-align: center;
    }

    .nexus-section-title {
        font-size: 1.5rem; /* Slightly smaller for better fit */
        color: var(--nexus-text, white);
        font-weight: 700;
        margin: 0;
        font-family: 'Outfit', sans-serif;
    }

    /* --- GRID (Responsive) --- */
    .file-grid {
        display: grid;
        /* Desktop: 2 columns, Mobile: 1 column full width */
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 15px; /* Reduced gap */
        max-width: 1000px;
        margin: 0 auto;
    }

    /* --- THE FILE CARD --- */
    .file-card {
        background: var(--file-bg);
        border: 1px solid var(--file-border);
        border-radius: 12px;
        padding: 16px; /* Compact padding */
        display: flex;
        align-items: center;
        gap: 15px;
        transition: transform 0.2s ease, background 0.2s;
        text-decoration: none;
        position: relative;
        overflow: hidden;
        cursor: pointer;
        user-select: none;
        -webkit-tap-highlight-color: transparent; /* Remove blue highlight on mobile */
    }

    .file-card:active {
        transform: scale(0.98); /* Click effect */
        background: rgba(255, 255, 255, 0.05);
    }

    /* --- ICON BOX --- */
    .file-icon-box {
        width: 50px; /* Smaller icon */
        height: 50px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        border: 1px solid rgba(255,255,255,0.05);
        font-weight: 800;
        color: var(--nexus-accent);
        font-size: 0.9rem;
        text-transform: uppercase;
    }

    /* --- TEXT CONTENT --- */
    .file-info {
        flex-grow: 1;
        min-width: 0;
    }

    .file-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--nexus-text, white);
        margin: 0 0 4px 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .file-meta {
        font-size: 0.8rem;
        color: #9ca3af;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    /* --- DOWNLOAD ACTION --- */
    .file-action {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        color: var(--nexus-accent);
        background: rgba(255, 255, 255, 0.05);
        transition: background 0.2s;
    }

    /* Mobile Tweaks */
    @media (max-width: 600px) {
        .nexus-file-section { padding: 20px 0; }
        .file-grid { grid-template-columns: 1fr; } /* Force full width list */
        .file-card { padding: 14px; }
        .file-action { background: transparent; }
    }
</style>

<div class="nexus-file-section">
    
    {% if component.title %}
        <div class="nexus-section-header">
            <h3 class="nexus-section-title">{{ component.title }}</h3>
        </div>
    {% endif %}

    <div class="file-grid">
        {% for file in component.files %}
            <div class="file-card" onclick="triggerDownload('{{ file.fileUrl }}', '{{ file.title }}')">
                
                <div class="file-icon-box">
                    {{ file.fileType|default:"FILE"|slice:":3" }}
                </div>

                <div class="file-info">
                    <h4 class="file-title">{{ file.title }}</h4>
                    <div class="file-meta">
                        {% if file.fileSize %}
                            <span>{{ file.fileSize }} MB</span>
                            <span>•</span>
                        {% endif %}
                        <span style="color: var(--nexus-accent);">Tap to Open</span>
                    </div>
                </div>

                <div class="file-action">
                    ↓
                </div>
            </div>
        {% endfor %}
    </div>

</div>

<script>
    function triggerDownload(url, filename) {
        if (!url || url === 'None') {
            alert("File URL is missing.");
            return;
        }

        // Create a temporary link to force the action
        const link = document.createElement('a');
        link.href = url;
        
        // Suggest a filename if possible
        link.download = filename || 'download';
        
        // Open in new tab (often safer for PDF/Images on mobile)
        link.target = '_blank';
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>