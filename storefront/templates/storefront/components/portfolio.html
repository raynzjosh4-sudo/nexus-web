<style>
    /* --- CSS VARIABLES --- */
    :root {
        --nexus-bg-card: var(--nexus-card-bg, #181b21);
        --nexus-border: var(--nexus-border, rgba(255, 255, 255, 0.08));
        --nexus-accent: var(--nexus-accent, #f97316);
        --nexus-text-muted: #9ca3af;
    }

    .nexus-portfolio-section { padding: 20px 0; }

    /* --- THE GRID --- */
    .pro-portfolio-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 30px; padding: 10px 0;
    }

    /* --- THE CARD --- */
    .pro-project-card {
        background: var(--nexus-bg-card);
        border-radius: 20px;
        overflow: hidden;
        border: 1px solid var(--nexus-border);
        position: relative;
        transition: all 0.3s;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        display: flex; flex-direction: column;
        height: 100%; cursor: pointer;
    }

    .pro-project-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        border-color: var(--nexus-accent);
    }

    /* --- IMAGE AREA --- */
    .pro-img-wrapper {
        position: relative; width: 100%; height: 220px; overflow: hidden;
    }
    .pro-project-img {
        width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease;
    }
    .pro-project-card:hover .pro-project-img { transform: scale(1.08); }

    .pro-status-badge {
        position: absolute; top: 15px; left: 15px;
        background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px);
        color: white; font-size: 0.7rem; font-weight: 700;
        text-transform: uppercase; padding: 5px 10px;
        border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.2);
        z-index: 5;
    }

    /* --- CONTENT --- */
    .pro-card-content {
        padding: 24px; display: flex; flex-direction: column; flex-grow: 1;
        background: linear-gradient(to bottom, var(--nexus-bg-card), #000);
    }

    .pro-card-title {
        font-size: 1.25rem; font-weight: 700; color: var(--nexus-text, white); margin: 0 0 10px 0;
    }

    .pro-card-desc {
        font-size: 0.95rem; color: var(--nexus-text-muted); line-height: 1.6; margin: 0;
        display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
    }

    .pro-card-action {
        margin-top: 20px; padding-top: 15px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        display: flex; align-items: center; justify-content: space-between;
        color: var(--nexus-accent); font-weight: 600; font-size: 0.9rem;
    }

    /* Mobile */
    @media (max-width: 600px) {
        .pro-portfolio-grid { grid-template-columns: 1fr; gap: 20px; }
        .pro-img-wrapper { height: 180px; }
    }

    /* --- MODAL --- */
    .portfolio-modal-overlay {
        position: fixed; inset: 0; background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(5px); z-index: 9999; display: none;
        align-items: center; justify-content: center; padding: 20px;
    }
    .portfolio-modal-content {
        background: var(--nexus-bg-card); border: 1px solid var(--nexus-border);
        width: 100%; max-width: 900px; border-radius: 24px; overflow: hidden;
        display: flex; flex-direction: column;
    }
    .portfolio-modal-overlay.open { display: flex; }
    
    @media (min-width: 768px) {
        .portfolio-modal-content { flex-direction: row; height: 500px; }
        .modal-img-col { width: 55%; height: 100%; }
        .modal-text-col { width: 45%; overflow-y: auto; }
    }
    
    .modal-img-col img { width: 100%; height: 100%; object-fit: cover; }
    .modal-text-col { padding: 30px; display: flex; flex-direction: column; }
    
    .modal-close-btn {
        position: absolute; top: 15px; right: 15px;
        background: rgba(0,0,0,0.5); color: white; width: 32px; height: 32px;
        border-radius: 50%; border: none; cursor: pointer; font-size: 1.2rem;
        z-index: 10;
    }
</style>

<div class="nexus-portfolio-section">
    {% if component.title %}
        <h3 class="nexus-section-title" style="margin-bottom: 25px; border-left: 4px solid var(--nexus-accent); padding-left: 15px;">
            {{ component.title }}
        </h3>
    {% endif %}

    <div class="pro-portfolio-grid">
        {% for proj in component.projects %}
            <div class="pro-project-card" 
                 onclick="openProjectModal('{{ proj.imageUrl }}', '{{ proj.title|escapejs }}', '{{ proj.description|escapejs }}', '{{ proj.projectUrl|default:'' }}', '{{ proj.status|default:'' }}')">
                <div class="pro-img-wrapper">
                    <img src="{{ proj.imageUrl }}" class="pro-project-img" alt="{{ proj.title }}">
                    {% if proj.status %}
                        <span class="pro-status-badge">{{ proj.status }}</span>
                    {% endif %}
                </div>
                <div class="pro-card-content">
                    <h4 class="pro-card-title">{{ proj.title }}</h4>
                    <p class="pro-card-desc">{{ proj.description }}</p>
                    <div class="pro-card-action">
                        <span>View Details</span>
                        <span>â†’</span>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div> 