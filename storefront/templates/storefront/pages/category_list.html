{% extends "storefront/pages/base_seo.html" %}

{% block header_meta %}
<div class="meta">
    <span>ðŸ“‚ {{ category }}</span>
    <span>{{ items|length }} Items Found</span>
</div>
{% endblock %}

{% block main_content %}
<!-- Category Listing -->
<article>
    <!-- Breadcrumb Navigation (for SEO) -->
    <nav style="margin-bottom: 30px; color: #8b5cf6;">
        <a href="/" style="color: #a855f7; text-decoration: none;">Home</a>
        <span> / </span>
        <span>{{ category }}</span>
    </nav>

    <!-- Category Description -->
    <div style="background: #1a0f2e; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
        <p style="color: #d1d5db; font-size: 1.05rem;">
            Browse all items in the <strong>{{ category }}</strong> category. Find great deals, connect with sellers,
            and discover amazing products on Nexus - Uganda's trusted marketplace.
        </p>
    </div>

    <!-- Items Grid -->
    {% if items %}
    <div
        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin-bottom: 40px;">
        {% for item in items %}
        <a href="/product/{{ item.id }}/" style="text-decoration: none; color: inherit;">
            <div
                style="background: #1a0f2e; border: 1px solid #2d1b4e; border-radius: 8px; overflow: hidden; transition: all 0.3s; cursor: pointer; height: 100%;">
                {% if item.image %}
                <img src="{{ item.image }}" alt="{{ item.title }}"
                    style="width: 100%; height: 150px; object-fit: cover; background: #2d1b4e;">
                {% elif item.data.images.0.url %}
                <img src="{{ item.data.images.0.url }}" alt="{{ item.title }}"
                    style="width: 100%; height: 150px; object-fit: cover; background: #2d1b4e;">
                {% else %}
                <div
                    style="width: 100%; height: 150px; background: #2d1b4e; display: flex; align-items: center; justify-content: center; color: #8b5cf6;">
                    ðŸ“·
                </div>
                {% endif %}
                <div style="padding: 15px;">
                    <h3 style="color: #a855f7; margin-bottom: 8px; font-size: 0.95rem; line-height: 1.4;">
                        {% if item.data.productName %}
                        {{ item.data.productName|truncatewords:5 }}
                        {% elif item.title %}
                        {{ item.title|truncatewords:5 }}
                        {% else %}
                        Untitled
                        {% endif %}
                    </h3>
                    {% if item.data.productPrice %}
                    <p style="color: #10b981; font-weight: 600; margin-bottom: 8px;">
                        UGX {{ item.data.productPrice|floatformat:0 }}
                    </p>
                    {% endif %}
                    <p style="color: #8b5cf6; font-size: 0.85rem;">{{ item.category }}</p>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div style="background: #1a0f2e; padding: 40px; border-radius: 8px; text-align: center;">
        <p style="color: #8b5cf6; font-size: 1.1rem;">
            ðŸ“­ No items found in {{ category }}
        </p>
        <p style="color: #8b5cf6; margin-top: 10px;">
            Check back soon or browse other categories
        </p>
    </div>
    {% endif %}

    <!-- Action Buttons -->
    <div class="action-buttons">
        <a href="https://play.google.com/store/apps/details?id=com.nexus.marketplace" class="btn btn-primary">
            ðŸ”— Download Nexus App
        </a>
        <a href="/" class="btn btn-secondary">
            Browse All Categories
        </a>
    </div>

    <!-- Tips Section -->
    <div
        style="background: #2d1b4e; padding: 20px; border-radius: 8px; margin-top: 40px; border-left: 4px solid #a855f7;">
        <h3 style="color: #a855f7; margin-bottom: 15px;">ðŸ’¡ Tips for Shopping in {{ category }}</h3>
        <ul style="color: #d1d5db; padding-left: 20px;">
            <li>Check product descriptions carefully</li>
            <li>Ask sellers questions before buying</li>
            <li>Compare prices across listings</li>
            <li>Negotiate payment and delivery options</li>
            <li>Meet in safe, public places</li>
            <li>Verify items before payment</li>
        </ul>
    </div>
</article>
{% endblock %}